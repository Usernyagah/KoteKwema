# News Management Feature

## Overview
The admin dashboard now includes a comprehensive news management system that allows administrators to create, edit, publish, and delete news articles with rich content and images.

## Features

### 1. **Add News Articles**
- Click the "Add News Article" button to open the creation form
- Required fields:
  - Title
  - Summary (brief description shown in news lists)
  - Content (full article text)
- Optional fields:
  - Author name
  - Category (e.g., Architecture, Design, News)
  - Featured Image (with Cloudinary upload)
  - Publish status (publish immediately or save as draft)

### 2. **Edit News Articles**
- Click the pencil icon next to any article
- Update any field in the form
- Change publish status
- Replace or remove featured image
- Changes are saved to Firebase Firestore

### 3. **Preview Articles**
- Click the eye icon to preview how the article will look
- See the full article with formatting
- View featured image, author, category, and publish date
- Preview before publishing

### 4. **Delete News Articles**
- Click the trash icon next to any article
- Confirm deletion in the dialog
- Article is permanently removed from the database

### 5. **Publish/Draft Status**
- Save articles as drafts for later publication
- Publish articles immediately
- Toggle publish status when editing
- Visual badge indicators (Published/Draft)

### 6. **Image Upload**
- Upload featured images directly from your computer
- Images are stored on Cloudinary
- Automatic image optimization
- Preview before saving
- Remove or replace images easily

## Data Structure

News articles are stored in Firebase Firestore under the `news` collection with the following structure:

```typescript
{
  id: string;              // Auto-generated by Firestore
  title: string;           // Required - Article headline
  summary: string;         // Required - Brief description
  content: string;         // Required - Full article content
  author?: string;         // Optional - Author name
  category?: string;       // Optional - Article category
  imageUrl?: string;       // Optional - Featured image URL
  published: boolean;      // Required - Publication status
  publishedDate?: Date;    // Auto-set when first published
  createdAt: Date;         // Auto-generated
  updatedAt?: Date;        // Auto-generated on updates
}
```

## UI Components

### News Tab
Located in the Admin Dashboard, accessible via the "News" tab (Newspaper icon).

### Features:
- **Table View**: Displays all articles with thumbnails and key information
- **Status Badges**: Visual indicators for Published/Draft status
- **Image Thumbnails**: Shows featured images in the list
- **Sorting**: Automatically sorted by creation date (newest first)
- **Responsive Design**: Works on all screen sizes
- **Empty State**: Shows a helpful message when no articles exist

### Dialogs:
- **Add Dialog**: Full-featured form for creating new articles
- **Edit Dialog**: Pre-populated form for updating existing articles
- **Preview Dialog**: Read-only view showing how the article will appear
- **Delete Confirmation**: Safety dialog to prevent accidental deletions

## Usage

### 1. Access the Dashboard
- Navigate to `/admin/login`
- Log in with your admin credentials
- Click on the "News" tab

### 2. Add a News Article
- Click "Add News Article"
- Fill in the required fields:
  - **Title**: Compelling headline for your article
  - **Summary**: Brief description (1-2 sentences)
  - **Content**: Full article text (supports multi-paragraph content)
- Optionally add:
  - **Author**: Name of the article author
  - **Category**: Article category for organization
  - **Featured Image**: Upload an image from your computer
  - **Publish**: Check to publish immediately, uncheck to save as draft
- Click "Add Article"

### 3. Edit a News Article
- Find the article in the table
- Click the pencil icon
- Update the desired fields
- Change publish status if needed
- Upload a new image or remove the existing one
- Click "Update Article"

### 4. Preview an Article
- Find the article in the table
- Click the eye icon
- Review the article layout and content
- Close the preview when done

### 5. Delete a News Article
- Find the article in the table
- Click the trash icon
- Confirm the deletion
- Article is permanently removed

## Image Upload

### Supported Features:
- **File Types**: All common image formats (JPG, PNG, GIF, WebP, etc.)
- **Size Limit**: Maximum 10MB per image
- **Storage**: Images are uploaded to Cloudinary
- **Optimization**: Automatic image optimization and CDN delivery
- **Preview**: See the image before saving the article
- **Remove**: Easy removal with the X button

### Upload Process:
1. Click "Choose File" in the Featured Image section
2. Select an image from your computer
3. Wait for the upload to complete (progress indicator shown)
4. Preview the uploaded image
5. Continue filling out the form or remove/replace the image

## Publishing Workflow

### Draft Mode:
1. Create an article without checking "Publish immediately"
2. Article is saved with `published: false`
3. Article appears with "Draft" badge in the list
4. Edit and refine the article as needed
5. When ready, edit the article and check "Publish immediately"

### Immediate Publishing:
1. Create an article with "Publish immediately" checked
2. Article is saved with `published: true`
3. `publishedDate` is automatically set to current date/time
4. Article appears with "Published" badge in the list

### Unpublishing:
1. Edit a published article
2. Uncheck "Publish immediately"
3. Article reverts to draft status
4. `publishedDate` is preserved for reference

## Firebase Setup

Ensure your Firebase project has Firestore enabled. The `news` collection will be created automatically when you add your first article.

### Security Rules (Recommended)

Add these rules to your Firestore security rules:

```javascript
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // News Articles - read published by all, write by authenticated admins only
    match /news/{articleId} {
      // Allow reading published articles
      allow read: if resource.data.published == true || request.auth != null;
      // Allow write only for authenticated admins
      allow write: if request.auth != null;
    }
  }
}
```

### Indexes (Optional)

For better query performance, create these indexes in Firestore:

1. **Collection**: `news`
   - **Fields**: `published` (Ascending), `publishedDate` (Descending)
   - **Query scope**: Collection

2. **Collection**: `news`
   - **Fields**: `category` (Ascending), `createdAt` (Descending)
   - **Query scope**: Collection

## Technical Details

### Components
- **NewsManagement.tsx**: Main component handling all CRUD operations
- Located at: `/src/components/admin/NewsManagement.tsx`
- 700+ lines of well-structured code

### Dependencies
- Firebase Firestore for data storage
- Cloudinary for image hosting
- Shadcn UI components (Dialog, Table, AlertDialog, Badge, etc.)
- Lucide React icons
- date-fns for date formatting
- React hooks for state management

### State Management
- Local state using React useState
- Real-time updates after each operation
- Loading states for better UX
- Error handling with toast notifications
- Image upload progress tracking

### Key Features
- **Form Validation**: Required fields are enforced
- **Error Handling**: Comprehensive error messages
- **Loading States**: Visual feedback during operations
- **Optimistic Updates**: Immediate UI feedback
- **Image Management**: Integrated Cloudinary upload
- **Date Formatting**: Human-readable dates using date-fns

## Integration with Frontend

To display news articles on your public website, you can:

### 1. Create a News Page Component

```typescript
import { collection, query, where, getDocs, orderBy } from "firebase/firestore";
import { db } from "@/lib/firebase";

const NewsPage = () => {
  const [articles, setArticles] = useState([]);

  useEffect(() => {
    const fetchNews = async () => {
      const q = query(
        collection(db, "news"),
        where("published", "==", true),
        orderBy("publishedDate", "desc")
      );
      const snapshot = await getDocs(q);
      const newsData = snapshot.docs.map(doc => ({
        id: doc.id,
        ...doc.data()
      }));
      setArticles(newsData);
    };
    fetchNews();
  }, []);

  return (
    <div>
      {articles.map(article => (
        <article key={article.id}>
          <h2>{article.title}</h2>
          <p>{article.summary}</p>
          {/* Add more fields as needed */}
        </article>
      ))}
    </div>
  );
};
```

### 2. Create Individual Article Pages

Use the article ID to fetch and display full article content with routing.

## Future Enhancements

Potential improvements:
- Rich text editor (WYSIWYG) for content formatting
- Multiple image galleries per article
- Tags and advanced categorization
- Related articles suggestions
- Article comments system
- Social media sharing integration
- SEO metadata fields
- Scheduled publishing
- Article analytics and view counts
- Search and filtering in admin panel
- Bulk operations (publish/unpublish multiple)
- Article versioning and revision history
- Featured/pinned articles
- Article templates

## Best Practices

### Content Guidelines:
1. **Title**: Keep it concise and compelling (50-60 characters)
2. **Summary**: Write 1-2 sentences that capture the essence (150-160 characters)
3. **Content**: Use clear paragraphs, break up long text
4. **Images**: Use high-quality, relevant images (1200x630px recommended)
5. **Categories**: Be consistent with category naming
6. **Author**: Include author attribution for credibility

### SEO Tips:
- Use descriptive, keyword-rich titles
- Write compelling summaries that encourage clicks
- Include relevant images with descriptive alt text
- Organize content with clear structure
- Publish regularly to keep content fresh

### Publishing Workflow:
1. Draft your article with all content
2. Upload and verify the featured image
3. Preview the article before publishing
4. Publish when ready
5. Share on social media or newsletters
6. Monitor engagement and update as needed
